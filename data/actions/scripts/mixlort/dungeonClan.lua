local config = {
[15990] = {
		nameclan = "Volcanic",
		chave = 25290, 
		count = 1, 
		area1 = {fromx = 21, fromy = 739, fromz = 12, tox = 171, toy = 882, toz= 12}, 
		area2 = {fromx = 188, fromy = 766, fromz = 12, tox = 345, toy = 899, toz= 12}, 
		area3 = {fromx = 23, fromy = 910, fromz = 12, tox = 179, toy = 1049, toz= 12},
		area4 = {fromx = 192, fromy = 913, fromz = 12, tox = 347, toy = 1054, toz= 12},
		tele1 = {x = 161, y = 858, z = 12},
		tele2 = {x = 329, y = 865, z = 12},
		tele3 = {x = 163, y = 1007, z = 12},
		tele4 = {x = 330, y = 1013, z = 12}
	},
[15991] = {
		nameclan = "Naturia",
		chave = 25295, 
		count = 1, 
		area1 = {fromx = 248, fromy = 345, fromz = 12, tox = 449, toy = 501, toz= 12}, 
		area2 = {fromx = 449, fromy = 345, fromz = 12, tox = 609, toy = 503, toz= 12}, 
		area3 = {fromx = 288, fromy = 512, fromz = 12, tox = 453, toy = 660, toz= 12}, 
		area4 = {fromx = 456, fromy = 510, fromz = 12, tox = 608, toy = 660, toz= 12},
		tele1 = {x = 300, y = 371, z = 12},
		tele2 = {x = 467, y = 373, z = 12},
		tele3 = {x = 302, y = 532, z = 12},
		tele4 = {x = 468, y = 534, z = 12}
	},
[15992] = {
		nameclan = "Seavell",
		chave = 25291, 
		count = 1, 
		area1 = {fromx = 1005, fromy = 344, fromz = 12, tox = 1175, toy = 632, toz= 12}, 
		area2 = {fromx = 1179, fromy = 344, fromz = 12, tox = 1348, toy = 631, toz= 12}, 
		area3 = {fromx = 1379, fromy = 340, fromz = 12, tox = 1574, toy = 630, toz= 12}, 
		area4 = {fromx = 1576, fromy = 341, fromz = 12, tox = 1765, toy = 631, toz= 12},
		tele1 = {x = 1153, y = 534, z = 12},
		tele2 = {x = 1320, y = 534, z = 12},
		tele3 = {x = 1528, y = 533, z = 12},
		tele4 = {x = 1739, y = 531, z = 12}
	},
[15993] = {
		nameclan = "Wingeon",
		chave = 25294, 
		count = 1, 
		area1 = {fromx = 617, fromy = 349, fromz = 11, tox = 778, toy = 491, toz= 11}, 
		area2 = {fromx = 820, fromy = 371, fromz = 11, tox = 956, toy = 491, toz= 11}, 
		area3 = {fromx = 632, fromy = 528, fromz = 11, tox = 775, toy = 663, toz= 11}, 
		area4 = {fromx = 813, fromy = 519, fromz = 11, tox = 975, toy = 659, toz= 11}, 
		tele1 = {x = 653, y = 426, z = 11},
		tele2 = {x = 845, y = 425, z = 11},
		tele3 = {x = 654, y = 587, z = 11},
		tele4 = {x = 846, y = 586, z = 11}
	},
[15994] = {
		nameclan = "Gardestrike",
		chave = 25293, 
		count = 1, 
		area1 = {fromx = 1087, fromy = 927, fromz = 12, tox = 1206, toy = 1081, toz= 12}, 
		area2 = {fromx = 1236, fromy = 960, fromz = 12, tox = 1351, toy = 1089, toz= 12}, 
		area3 = {fromx = 1237, fromy = 793, fromz = 12, tox = 1353, toy = 945, toz= 12}, 
		area4 = {fromx = 1206, fromy = 641, fromz = 12, tox = 1325, toy = 800, toz= 12}, 
		tele1 = {x = 1098, y = 1003, z = 12},
		tele2 = {x = 1249, y = 1019, z = 12},
		tele3 = {x = 1248, y = 867, z = 12},
		tele4 = {x = 1220, y = 713, z = 12}
	},
[15995] = {
		nameclan = "Malefic",
		chave = 25296, 
		count = 1, 
		area1 = {fromx = 593, fromy = 671, fromz = 12, tox = 765, toy = 787, toz= 12}, 
		area2 = {fromx = 777, fromy = 670, fromz = 12, tox = 944, toy = 792, toz= 12}, 
		area3 = {fromx = 623, fromy = 794, fromz = 12, tox = 800, toy = 915, toz= 12}, 
		area4 = {fromx = 810, fromy = 795, fromz = 12, tox = 970, toy = 924, toz= 12},
		tele1 = {x = 693, y = 774, z = 12},
		tele2 = {x = 874, y = 785, z = 12},
		tele3 = {x = 727, y = 902, z = 12},
		tele4 = {x = 902, y = 912, z = 12}
	},
[15996] = {
		nameclan = "Orebound",
		chave = 25297, 
		count = 1, 
		area1 = {fromx = 10, fromy = 328, fromz = 12, tox = 138, toy = 530, toz= 12}, 
		area2 = {fromx = 919, fromy = 340, fromz = 12, tox = 271, toy = 537, toz= 12}, 
		area3 = {fromx = 16, fromy = 543, fromz = 12, tox = 142, toy = 731, toz= 12}, 
		area4 = {fromx = 162, fromy = 562, fromz = 12, tox = 282, toy = 763, toz= 12},
		tele1 = {x = 62, y = 493, z = 12},
		tele2 = {x = 197, y = 499, z = 12},
		tele3 = {x = 70, y = 708, z = 12},
		tele4 = {x = 210, y = 714, z = 12}
	},
[15997] = {
		nameclan = "Psycraft",
		chave = 25298, 
		count = 1, 
		area1 = {fromx = 360, fromy = 942, fromz = 12, tox = 528, toy = 1062, toz= 12}, 
		area2 = {fromx = 525, fromy = 928, fromz = 12, tox = 702, toy = 1066, toz= 12}, 
		area3 = {fromx = 363, fromy = 1045, fromz = 12, tox = 530, toy = 1180, toz= 12}, 
		area4 = {fromx = 530, fromy = 1050, fromz = 12, tox = 708, toy = 1192, toz= 12},
		tele1 = {x = 453, y = 1046, z = 12},
		tele2 = {x = 629, y = 1048, z = 12},
		tele3 = {x = 457, y = 1165, z = 12},
		tele4 = {x = 630, y = 1173, z = 12}
	},
[15998] = {
		nameclan = "Raibolt",
		chave = 25292, 
		count = 1, 
		area1 = {fromx = 958, fromy = 670, fromz = 12, tox = 1072, toy = 797, toz= 12}, 
		area2 = {fromx = 1070, fromy = 667, fromz = 12, tox = 1197, toy = 791, toz= 12}, 
		area3 = {fromx = 981, fromy = 805, fromz = 12, tox = 1096, toy = 926, toz= 12}, 
		area4 = {fromx = 1105, fromy = 798, fromz = 12, tox = 1225, toy = 917, toz= 12},
		tele1 = {x = 360, y = 755, z = 12},
		tele2 = {x = 489, y = 778, z = 12},
		tele3 = {x = 418, y = 916, z = 12},
		tele4 = {x = 556, y = 894, z = 12}
	},
[15999] = {
		nameclan = "Ironhard",
		chave = 25289, 
		count = 1, 
		area1 = {fromx = 593, fromy = 675, fromz = 12, tox = 1073, toy = 797, toz= 12}, 
		area2 = {fromx = 1066, fromy = 661, fromz = 12, tox = 1197, toy = 791, toz= 12}, 
		area3 = {fromx = 981, fromy = 805, fromz = 12, tox = 1100, toy = 925, toz= 12} , 
		area4 = {fromx = 1095, fromy = 800, fromz = 12, tox = 1225, toy = 917, toz= 12},
		tele1 = {x = 970, y = 732, z = 12},
		tele2 = {x = 1093, y = 725, z = 12},
		tele3 = {x = 996, y = 859, z = 12},
		tele4 = {x = 1122, y = 851, z = 12}
	}	
}

function onUse(cid, item, fromPosition, itemEx, toPosition)
	
	if not config[item.actionid] then
		return true
	end
	
	local cfg = config[item.actionid]

	if isRiderOrFlyOrSurf(cid) then
		doPlayerSendCancel(cid, "Saia do ride ou fly para poder acessar a dungeon.")
		return true
	end
	
	if getPlayerStorageValue(cid, 468703) - os.time() > 0 then
		doPlayerSendCancel(cid, "Aguarde "..convertTime(getPlayerStorageValue(cid, 468703) - os.time()).." para entrar na Dungeon.")
		return true
	end
	
	if getPlayerClanName(cid) == cfg.nameclan then		
		if getPlayerItemCount(cid, cfg.chave) >= cfg.count then
			if #getPlayersInArea(cfg.area1) < 1 then				
				doTeleportThing(cid, cfg.tele1)								
				setPlayerStorageValue(cid, 2154601, 1)	
				setPlayerStorageValue(cid, 2154600, 1)	
				setPlayerStorageValue(cid, 1654987, 1)				
				doPlayerRemoveItem(cid, cfg.chave, cfg.count)
				addEvent(doTeleportFinish, 15 * 60 * 1000, cid)				
				doSendPlayerExtendedOpcode(cid, 133, 900)				
			elseif #getPlayersInArea(cfg.area2) < 1 then			
				doTeleportThing(cid, cfg.tele2)								
				setPlayerStorageValue(cid, 2154601, 1)	
				setPlayerStorageValue(cid, 2154600, 1)	
				setPlayerStorageValue(cid, 1654987, 1)	
				doPlayerRemoveItem(cid, cfg.chave, cfg.count)
				addEvent(doTeleportFinish, 15 * 60 * 1000, cid)
				doSendPlayerExtendedOpcode(cid, 133, 900)	
			elseif #getPlayersInArea(cfg.area3) < 1 then			
				doTeleportThing(cid, cfg.tele3)								
				setPlayerStorageValue(cid, 2154601, 1)	
				setPlayerStorageValue(cid, 2154600, 1)	
				setPlayerStorageValue(cid, 1654987, 1)	
				doPlayerRemoveItem(cid, cfg.chave, cfg.count)
				addEvent(doTeleportFinish, 15 * 60 * 1000, cid)
				doSendPlayerExtendedOpcode(cid, 133, 900)	
			elseif #getPlayersInArea(cfg.area4) < 1 then			
				doTeleportThing(cid, cfg.tele4)								
				setPlayerStorageValue(cid, 2154601, 1)	
				setPlayerStorageValue(cid, 2154600, 1)	
				setPlayerStorageValue(cid, 1654987, 1)	
				doPlayerRemoveItem(cid, cfg.chave, cfg.count)
				addEvent(doTeleportFinish, 15 * 60 * 1000, cid)
				doSendPlayerExtendedOpcode(cid, 133, 900)	
			else
				doPlayerSendCancel(cid, "Não tem dungeon disponível no momento, tente mais tarde!")
			end
		else
			doPlayerSendCancel(cid, "Você precisa de uma "..cfg.nameclan.." Key, para acessar essa porta.")		
		end	
	else
		doPlayerSendCancel(cid, "Você precisa ser do clan "..cfg.nameclan..".")
	end
	
return true  
end
