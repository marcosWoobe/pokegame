pokesClan = {
["Naturia"] = {chaves = 25295, pokesC = {"Venusaur","Tangela","Vileplume","Scyther","Tangrowth","Pinsir","Venomoth","Meganium","Ariados","Sceptile","Heracross","Scizor","Exeggutor","Tropius","Cradily","Forretress","Ludicolo","Shiftry","Ninjask","Breelom","Armaldo","Parasect","Victreebel","Bellossom","Jumpluff","Sunflora","Heracross","Beautifly","Dustox","Masquerain","Shedinja","Volbeat","Illumise","Roselia","Cacturne","Shiny Scyther","Shiny Pinsir","Shiny Venomoth","Shiny Venonat","Shiny Venusaur","Shiny Meganium","Shiny Tangela","Shiny Ariados","Shiny Vileplume","Shiny Beedrill","Shiny Butterfree","Shiny Oddish","Shiny Paras","Shiny Parasect"}},
["Volcanic"] = {chaves = 25290, pokesC = {"Charizard","Typhlosion","Magmar","Arcanine","Magcargo","Ninetales","Magmortar","Blaziken","Flareon","Torkoal","Houndoom","Rapidash","Camerupt","Shiny Magcargo","Shiny Arcanine","Shiny Magmar","Shiny Typhlosion","Shiny Charizard","Shiny Ninetales","Shiny Flareon","Shiny Growlithe"}},
["Seavell"] = {chaves = 25291, pokesC = {"Blastoise","Vaporeon","Gyarados","Tentacruel","Lanturn","Jynx","Feraligatr","Politoed","Swampert","Milotic","Giant Magikarp","Lapras","Mantine","Slowking","Walrein","Kingdra","Shiny Magikarp", "Slowbro","Omastar","Kabutops","Piloswine","Ludicolo","Crawdaunt","Glalie","Shiny Blastoise","Shiny Vaporeon","Shiny Gyarados","Shiny Kingler","Shiny Tentacruel","Shiny Lanturn","Shiny Jynx","Shiny Tentacool","Shiny Horsea","Shiny Feraligatr","Shiny Politoed","Shiny Giant Magikarp","Golduck","Poliwrath","Dewgong","Cloyster","Kingler","Seadra","Shiny Seadra","Seaking","Starmie","Qwilfish","Azumarill","Quagsire","Sneasel","Corsola","Delibird","Octillery","Sharpedo","Wailmer","Wailord","Whiscash","Huntail","Gorebyss","Relicanth","Luvdisc","Pelipper"}},
["Orebound"] = {chaves = 25297, pokesC = {"Shiny Sudowoodo", "Gligar","Golem","Rhydon","Pupitar","Marowak","Magcargo","Aerodactyl","Rhyperior","Tyranitar","Swampert","Steelix","Sudowoodo","Armaldo","Aggron","Cradily","Donphan","Kabutops","Omastar","Claydol","Flygon","Piloswine","Camerupt","Shiny Golem","Shiny Rhydon","Shiny Pupitar","Shiny Marowak","Shiny Cubone","Shiny Sandslash","Shiny Magcargo","Shiny Onix","Onix","Sandslash","Nidoqueen","Nidoking","Quagsire","Corsola","Lunatone","Solrock","Whiscash","Relicanth"}},
["Wingeon"] = {chaves = 25294, pokesC = {"Shiny Dragonite", "Gligar","Fearow","Pidgeot","Scyther","Gyarados","Dragonair","Charizard","Farfetch'd","Dodrio","Aerodactyl","Salamence","Altaria","Dragonite","Crobat","Kingdra","Skarmory","Mantine","Tropius","Swellow","Flygon","Ninjask","Xatu","Togetic","Pelipper","Noctowl","Shiny Gyarados","Shiny Scyther","Shiny Dragonair","Shiny Pidgeot","Shiny Charizard","Shiny Farfetch'd","Shiny Zubat","Shiny Golbat","Shiny Dratini","Shiny Dodrio","Shiny Crobat","Shiny Fearow","Shiny Xatu","Jumpluff","Murkrow","Delibird","Beautifly","Masquerain","Shelgon"}},
["Malefic"] = {chaves = 25296, pokesC = {"Shiny Tyranitar", "Crobat","Gengar","Absol","Venusaur","Tentacruel","Muk","Venomoth","Umbreon","Dusknoir","Sableye","Nidoking","Tyranitar","Misdreavus","Houndoom","Banette","Seviper","Shiftry","Crawdaunt","Qwilfish","Mightyena","Shiny Gengar","Shiny Tentacool","Shiny Tentacruel","Shiny Grimer","Shiny Muk","Shiny Umbreon","Shiny Venonat","Shiny Venomoth","Shiny Nidoking","Shiny Venusaur","Shiny Beedrill","Shiny Crobat","Shiny Golbat","Shiny Zubat","Shiny Oddish","Shiny Weezing","Murkrow","Sneasel","Shedinja","Sharpedo","Cacturne","Dusclops","Swalot","Weezing","Nidoqueen","Beedrill","Vileplume","Victreebel","Ariados","Dustox"}},
["Gardestrike"] = {chaves = 25293, pokesC = {"Hitmontop","Hitmonlee","Tauros","Machamp","Stantler","Slaking","Kangaskhan","Blaziken","Hitmonchan","Breelom","Noctowl","Snorlax","Ursaring","Hariyama","Heracross","Blissey","Smeargle 8","Pidgeot","Primeape","Farfetch'd","Zangoose","Exploud","Miltank","Porygon2","Kecleon","Girafarig","Swellow","Medicham","Smeargle 7","Smeargle 6","Smeargle 5","Smeargle 4","Smeargle 3","Smeargle 2","Smeargle 1","Shiny Tauros","Shiny Pidgeot","Shiny Stantler", "Shiny Farfetch'd", "Shiny Hitmonlee","Shiny Hitmonchan","Shiny Snorlax","Shiny Machamp","Shiny Hitmontop","Wigglytuff","Poliwrath","Persian","Lickitung","Chansey","Ditto","Porygon","Aipom","Granbull","Linoone","Vigoroth","Delcatty","Shiny Ditto","Dodrio","Furret","Togetic"}},
["Psycraft"] = {chaves = 25298, pokesC = {"Alakazam","Clefable","Wigglytuff","Kadabra","Mr. Mime","Jynx","Xatu","Espeon","Metagross","Gardevoir","Exeggutor","Slowking","Wobbuffet","Slowbro","Golduck","Kirlia","Claydol","Starmie","Grumpig","Medicham","Togetic","Metang","Girafarig","Mawile","Granbull","Hypno","Shiny Hypno","Shiny Alakazam","Shiny Mr. Mime","Shiny Jynx","Shiny Xatu","Shiny Espeon","Lunatone","Solrock","Chimecho", "Unown"}},
["Raibolt"] = {chaves = 25292, pokesC = {"Raichu","Ampharos","Electabuzz","Manectric","Ampharos","Lanturn","Magneton","Electivire","Raichu","Jolteon","Magnezone","Electrode","Luxray","Flaaffy","Plusle","Minun","Pikachu","Shiny Electabuzz","Shiny Raichu","Shiny Ampharos","Shiny Lanturn","Shiny Magneton","Shiny Jolteon","Shiny Electrode", "Shiny Voltorb"}},
["Ironhard"] = {chaves = 25289, pokesC = {"Shiny Skarmory", "Shiny Steelix", "Scizor","Steelix","Aggron","Lucario","Magneton","Metagross","Skamory","Empoleon","Magnezone","Forretress","Lairon","Mawile","Metang","Shiny Onix","Shiny Magneton","Shiny Lucario"}}
}

clansName = {
--[num do clan] = {nome do clan, storage outfit normal, storage outfit rank5},
[1] = {'Volcanic', 181613, 181625},
[2] = {'Seavell', 181619, 181622},
[3] = {'Orebound', 181620, 181627},
[4] = {'Wingeon', 181616, 181626},
[5] = {'Malefic', 181615, 181624},
[6] = {'Gardestrike', 181614, 181628},
[7] = {'Psycraft', 181618, 181629},
[8] = {'Naturia', 181612, 181623},
[9] = {'Raibolt', 181617, 181621},
[10] = {'Ironhard', 10050, 10051},
}

function setPlayerPointsClan(cid, points)
	return setPlayerStorageValue(cid, 86200, getPlayerPointsClan(cid) + points)
end

function getPlayerPointsClan(cid)
	return getPlayerStorageValue(cid, 86200)
end

function doRemovePlayerPoints(cid, points)
	return setPlayerPointsClan(cid, -points)
end

function getPlayerClanName(cid)
	if not isCreature(cid) then return 'No Clan!' end
	return clansName[getPlayerClanNum(cid)] and clansName[getPlayerClanNum(cid)][1] or 'No Clan!'
end

function getPlayerClanNum(cid)
	if not isCreature(cid) then return -1 end
	return getPlayerStorageValue(cid, 86228)
end

function getPlayerClanRank(cid)
	if not isCreature(cid) then return -1 end
	return getPlayerStorageValue(cid, 862281)
end

function getPlayerClanLevel(cid)
	if not isCreature(cid) then return false end
	return getPlayerSkillLevel(cid, 2) or 10
end

function getPokeClan(cid, name)
local pokes = pokesClan[getPlayerClanName(cid)]

	if pokes then
		return isInArray(pokes.pokesC, doCorrectString(name))
	end
	
	return true
end

function addChaveToClan(cid)
	
local cfg = pokesClan[getPlayerClanName(cid)]
		
	if cfg then
		doPlayerAddItem(cid, cfg.chaves, 1)
	end
	
return true
end

function doAddExpClan(cid, exp, randomvalue)

local expC = {
    [1] = {min = 0, max = 20, chance = 500}, 
    [2] = {min = 21, max = 30, chance = 450}, 
    [3] = {min = 31, max = 35, chance = 400}, 
    [4] = {min = 36, max = 40, chance = 350}, 
    [5] = {min = 41, max = 45, chance = 300}, 
    [6] = {min = 46, max = 50, chance = 250}, 
    [7] = {min = 51, max = 55, chance = 200},
    [8] = {min = 56, max = 60, chance = 150}, 
    [9] = {min = 61, max = 65, chance = 100}, 
    [10] = {min = 66, max = 70, chance = 80},
    [11] = {min = 71, max = 75, chance = 50},
    [12] = {min = 76, max = 80, chance = 30},
    [13] = {min = 81, max = 85, chance = 20},
    [14] = {min = 86, max = 90, chance = 15},
    [15] = {min = 91, max = 99, chance = 10},
}

    for pclan, array in pairs(expC) do
        if getPlayerSkillLevel(cid, 2) < 100 then
            if getPlayerSkillLevel(cid, 2) >= array.min and getPlayerSkillLevel(cid, 2) <= array.max then
                if randomvalue <= array.chance then
                    doPlayerAddSkillTry(cid, 2, exp)
					doSendAnimatedText(getThingPos(cid), exp.."%", 215)	
					doPlayerSendCancel(cid, "Você acaba de ganhar "..exp.."% de clan experiência.")	
                    doPlayerSendTextMessage(cid, 25, "Você acaba de ganhar "..exp.."% de clan experiência.")
                end
            end
        else
            doPlayerSendCancel(cid, "Você alcançou o level máximo!")
            doPlayerSendTextMessage(cid, 25, "Você alcançou o level máximo!")
        end
    end

    return true
end
		
function getPercentClan(cid)

local config = {
	[1] = {percent = 1},
	[2] = {percent = 1.10},
	[3] = {percent = 1.20},
	[4] = {percent = 1.30},
	[5] = {percent = 1.40}
}
	
local cfg = config[getPlayerClanRank(cid)]

	if cfg then
		return cfg.percent
	end
	
	return tonumber(1)
end		
		
function setPlayerClan(cid, clan)
if not isCreature(cid) or not clan then return false end
if removePlayerClan(cid) then  --para evitar possiveis problemas!
   if type(clan) == "number" and (clan >= 1 and clan <= 10) then
      setPlayerStorageValue(cid, 86228, clan)    --sto clan
      setPlayerClanRank(cid, 1)                  --set rank 1
      setPlayerStorageValue(cid, clansName[clan][2], 1)   --sto roupa
      return true
   elseif type(clan) == "string" then
      clan = string.lower(clan)
      for e, f in pairs(clansName) do
          local clan2 = string.lower(f[1])
          if clan == clan2 then
             setPlayerStorageValue(cid, 86228, e)  --sto clan
             setPlayerClanRank(cid, 1)             --set rank 1
             setPlayerStorageValue(cid, clansName[e][2], 1)   --sto roupa
             return true
          end
      end
   end
end
return false 
end

function setPlayerClanRank(cid, rank)
if not isCreature(cid) or not rank then return false end
if type(rank) == "number" and (rank >= 1 and rank <= 5) then
   setPlayerStorageValue(cid, 862281, rank)
   if rank == 5 then 
      setPlayerStorageValue(cid, clansName[getPlayerClanNum(cid)][3], 1)
   end
   return true
end
return false
end 

function removePlayerClan(cid)
if not isCreature(cid) then return false end
if getPlayerStorageValue(cid, 854789) >= 1 then return false end --nao pode remover o clan se o player tiver fazendo missoes de rank!
   setPlayerStorageValue(cid, 86228, -1) --sto do clan
   setPlayerStorageValue(cid, 862281, -1) --sto do rank
   setPlayerStorageValue(cid, 854789, -1) --sto da quest de rank
   setPlayerStorageValue(cid, 854788, -1) --sto catch, quest de rank
   setPlayerStorageValue(cid, 854787, -1) --sto task, quest de rank
   for i = 181612, 181638 do
       setPlayerStorageValue(cid, i, -1)  --sto das roupas de clan
   end
   setPlayerStorageValue(cid, 10050, -1)  --sto das roupas de clan
   setPlayerStorageValue(cid, 10051, -1)  --sto das roupas de clan
   
return true
end      